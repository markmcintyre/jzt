<!DOCTYPE html>
<html>
    <head>
        <title>JZT</title>
        <meta charset="utf-8" />
        <link rel="stylesheet" href="../script/thirdparty/codemirror/codemirror.css" />
        <link rel="stylesheet" href="../script/thirdparty/foundation/foundation.min.css" />
        <link rel="stylesheet" href="editor.css" />
    </head>
    <body>


        <nav class="top-bar" data-topbar role="navigation">

            <ul class="title-area">
                <li class="name">
                    <h1><a href="">JZT Game World Editor</a></h1>
                </li>

                <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
            </ul>

            <section class="top-bar-section">

                <ul class="left">
                    <li class="has-dropdown">
                        <a href="#">World</a>
                        <ul class="dropdown">
                            <li><a href="" id="save-game">Save</a></li>
                            <li><a href="">Openâ€¦</a></li>
                            <li class="divider"></li>
                            <li><a href="" id="download">Download as JZT</a></li>
                            <li><a href="" id="download-json">Download as JSON</a></li>
                            <li class="divider"></li>
                            <li><a href="" data-reveal-id="world-options-dialog">Options</a></li>
                        </ul>
                    </li>
                    <li class="has-dropdown">
                        <a href="">Board</a>
                        <ul class="dropdown" id="board-menu">
                            <li><label>Current Board</label></li>
                            <li class="board-selector-item"><select id="board-selector"></select></li>
                            <li class="divider"></li>
                            <li><a href="" id="new-board">Add New Board</a></li>
                            <li><a href="" id="delete-board">Delete Current Board</a></li>
                            <li class="divider"></li>
                            <li><a href="" data-reveal-id="board-options-dialog">Board Options</a></li>
                        </ul>
                    </li>
                </ul>

                <ul class="right">

                    <li class="has-form">
                        <ul id="mode-selector" class="button-group">
                          <li><a href="#" class="button active" data-mode="draw">Draw</a></li>
                          <li><a href="#" class="button" data-mode="fill">Fill</a></li>
                          <li><a href="#" class="button" data-mode="select">Select</a></li>
                        </ul>
                    </li>

                    <li class="has-form">
                      <a href="" class="button">Play</a>
                    </li>

                </ul>

            </section>

        </nav>

        <div id="board-options-dialog" class="reveal-modal" data-reveal>

            <div class="row">
                <div class="small-12 columns">
                    <h3>Board Options</h3>
                </div>
            </div>


            <div class="row">

                <div class="small-12 medium-8 columns">
                    <label>North Board <select data-id="north"><option value="">None</option></select></label>
                </div>
                <div class="small-12 medium-4 columns">
                    <label>North Offset <input type="number" data-id="north-offset" /></label>
                </div>

            </div>

            <div class="row">

                <div class="small-12 medium-8 columns">
                    <label>East Board <select data-id="east"><option value="">None</option></select></label>
                </div>
                <div class="small-12 medium-4 columns">
                    <label>East Offset <input type="number" data-id="east-offset" /></label>
                </div>

            </div>

            <div class="row">

                <div class="small-12 medium-8 columns">
                    <label>South Board <select data-id="south"><option value="">None</option></select></label>
                </div>
                <div class="small-12 medium-4 columns">
                    <label>South Offset <input type="number" data-id="south-offset" /></label>
                </div>

            </div>

            <div class="row">

                <div class="small-12 medium-8 columns">
                    <label>West Board <select data-id="west"><option value="">None</option></select></label>
                </div>
                <div class="small-12 medium-4 columns">
                    <label>West Offset <input type="number" data-id="west-offset" /></label>
                </div>

            </div>

            <div class="row">
                <div class="small-12 medium-8 columns">
                    <label>Maximum player bullets</label>
                    <input type="number" data-id="max-bullets" />
                </div>
                <div class="small-6 medium-2 columns">
                    <label>Board is Dark</label>
                    <div class="switch">
                        <input type="checkbox" data-id="dark" id="darkcheckbox" />
                        <label for="darkcheckbox"></label>
                    </div>
                </div>
                <div class="small-6 medium-2 columns">
                    <label>Re-enter when hurt</label>
                    <div class="switch">
                        <input type="checkbox" data-id="reenter" id="reentercheckbox" />
                        <label for="reentercheckbox"></label>
                    </div>
                </div>
            </div>


            <a class="close-reveal-modal">&#215;</a>
        </div>

        <div id="world-options-dialog" class="reveal-modal" data-reveal>
            <h3>World Options</h3>
            <div class="row">
                <div class="small-12 medium-6 columns">
                    <label>Game Title: <input type="text" data-id="title" /></label>
                    <label>Author: <input type="text" data-id="author"/></label>
                </div>
                <div class="small-12 medium-6 columns">
                    <label>Title Board: <select data-id="title-board"><option value="">None</option></select></label>
                    <label>Starting Board: <select data-id="starting-board"></select></label>
                    <label>Victory Board: <select data-id="victory-board"><option value="">None</option></select></label>
                </div>
            </div>

            <a class="close-reveal-modal">&#215;</a>
        </div>

        <div class="row fullWidth">

            <div id="edit-area" class="small-12 medium-8 columns">
            </div>

            <div class="small-12 medium-4 columns">

                <dl class="tabs" data-tab id="sidebar-tabs">
                    <dd class="active"><a href="#toolmap">Map</a></dd>
                    <dd><a href="#toolscripts">Scripts</a></dd>
                </dl>

                <div class="tabs-content">

                    <!-- Map -->
                    <div class="content active" id="toolmap">
                        <label>
                            Selected Item
                            <select id="item-selector">

                                <optgroup label="Items">
                                    <option value="">Nothing</option>
                                    <option value="Ammo" />Ammo</option>
                                    <option value="Bomb" />Bomb</option>
                                    <option value="Boulder" />Boulder</option>
                                    <option value="Conveyor" />Conveyor</option>
                                    <option value="Door" />Door</option>
                                    <option value="Duplicator" />Duplicator</option>
                                    <option value="Gem" />Gem</option>
                                    <option value="Heart"/>Heart</option>
                                    <option value="Key" />Key</option>
                                    <option value="Passage" />Passage</option>
                                    <option value="Player">Player</option>
                                    <option value="Ricochet" />Ricochet</option>
                                    <option value="Signpost">Signpost</option>
                                    <option value="SliderEw" />Slider (East/West)</option>
                                    <option value="SliderNs" />Slider (North/South)</option>
                                    <option value="Teleporter" />Teleporter</option>
                                    <option value="Torch" />Torch</option>
                                </optgroup>

                                <optgroup label="Terrain">
                                    <option value="BreakableWall" />Breakable Wall</option>
                                    <option value="FakeWall" />Fake Wall</option>
                                    <option value="Forest" />Forest</option>
                                    <option value="InvisibleWall" />Invisible Wall</option>
                                    <option value="Lava" />Lava</option>
                                    <option value="LineWall" />Line</option>
                                    <option value="River" />River</option>
                                    <option value="SolidWall" />Solid Wall</option>
                                    <option value="SpiderWeb" />Spider Web</option>
                                    <option value="Text"/>Text</option>
                                    <option value="Wall" />Wall</option>
                                    <option value="Water" />Water</option>
                                </optgroup>

                                <optgroup label="Creatures">
                                    <option value="Bear" />Bear</option>
                                    <option value="Blinker" />Blinker</option>
                                    <option value="Centipede" />Centipede</option>
                                    <option value="Lion" />Lion</option>
                                    <option value="Pusher" />Pusher</option>
                                    <option value="Ruffian" />Ruffian</option>
                                    <option value="Scriptable" />Scriptable</option>
                                    <option value="Snake" />Snake</option>
                                    <option value="Spider" />Spider</option>
                                    <option value="SpinningGun" />Spinning Gun</option>
                                    <option value="Tiger" />Tiger</option>
                                </optgroup>
                            </select>
                        </label>

                        <div id="template-customizer"></div>

                        <!-- <input id="load-game" type="file" /><br/> -->

                        <label>Raw Template
                            <textarea id="active-template-editor" rows="10" style="width: 100%"></textarea>
                        </label>

                    </div>

                    <!-- Scripts -->
                    <div class="content" id="toolscripts">

                        <select data-id="selector"></select>

                        <div class="scriptcontainer">
                            <textarea data-id="editor" rows="30" style="width: 100%"></textarea>
                        </div>

                        <div data-id="warning" class="script-warning"></div>

                        <button class="small" data-id="new">New Script</button>
                        <button class="small" data-id="delete">Delete Script</button>

                    </div>

                </div>

            </div>

        </div>

        <script type="text/javascript" src="../script/thirdparty/foundation/vendor/jquery.js"></script>
        <script type="text/javascript" src="../script/thirdparty/foundation/foundation.min.js"></script>
        <script type="text/javascript" src="../script/jzt.js"></script>
        <script type="text/javascript" src="../script/graphics.js"></script>
        <script type="text/javascript" src="../script/board.js"></script>
        <script type="text/javascript" src="../script/input.js"></script>
        <script type="text/javascript" src="../script/basic.js"></script>
        <script type="text/javascript" src="../script/lexer.js"></script>
        <script type="text/javascript" src="../script/parser.js"></script>
        <script type="text/javascript" src="../script/things.js"></script>
        <script type="text/javascript" src="../script/jzt-script-parser.js"></script>
        <script type="text/javascript" src="../script/jzt-script-commands.js"></script>
        <script type="text/javascript" src="../script/jzt-script.js"></script>
        <script type="text/javascript" src="../script/editor.js"></script>
        <script type="text/javascript" src="../script/i18n.js"></script>
        <script type="text/javascript" src="../script/thirdparty/lz-string-1.3.3.js"></script>
        <script type="text/javascript" src="../script/thirdparty/base-64-tools.js"></script>
        <script type="text/javascript" src="../script/thirdparty/codemirror/codemirror.js"></script>
        <script type="text/javascript" src="../script/ux/ux-editor.js"></script>
        <script type="text/javascript">



            (function () {

                $(document).foundation();

                jztux.initializeEditorUx({
                    editArea: document.getElementById('edit-area'),
                    boardSelector: document.getElementById('board-selector'),
                    boardOptionsDialog: document.getElementById('board-options-dialog'),
                    worldOptionsDialog: document.getElementById('world-options-dialog'),
                    scriptDialog: document.getElementById('toolscripts'),
                    templateEditor: document.getElementById('active-template-editor'),
                    download: document.getElementById('download'),
                    downloadJson: document.getElementById('download-json'),
                    newBoard: document.getElementById('new-board'),
                    deleteBoard: document.getElementById('delete-board'),
                    loadGame: document.getElementById('load-game'),
                    scriptButton: document.getElementById('script-button'),
                    saveButton: document.getElementById('save-game'),
                    itemSelector: document.getElementById('item-selector'),
                    modeSelector: document.getElementById('mode-selector'),
                    sidebarTabs: $('#sidebar-tabs')
                });
            })();

              /* jztux.initializeEditorUx({
                    boardSelector: document.getElementById('board-selector'),
                    northSelector: document.getElementById('north-selector'),
                    eastSelector: document.getElementById('east-selector'),
                    southSelector: document.getElementById('south-selector'),
                    westSelector: document.getElementById('west-selector'),
                    darkSelector: document.getElementById('dark-selector'),
                    templateEditor: document.getElementById('active-template-editor'),
                    scriptSelector: document.getElementById('script-selector'),
                    newScriptButton: document.getElementById('new-script-button'),
                    deleteScriptButton: document.getElementById('delete-script-button'),
                    scriptEditor: document.getElementById('script-editor'),
                    modeSelector: document.getElementById('mode-selector'),
                    editArea: document.getElementById('edit-area'),
                    toolBox: document.getElementById('toolbox'),
                    download: document.getElementById('download'),
                    downloadJson: document.getElementById('download-json'),
                    loadGame: document.getElementById('load-game'),
                    newBoard: document.getElementById('new-board'),
                    deleteBoard: document.getElementById('delete-board'),
                    gameName: document.getElementById('game-name'),
                    authorName: document.getElementById('author-name'),
                    startingBoardSelector: document.getElementById('starting-board-selector'),
                    titleBoardSelector: document.getElementById('title-board-selector'),
                    victoryBoardSelector: document.getElementById('victory-board-selector'),
                    scriptWarning: document.getElementById('script-warning'),
                    scriptDialog: document.getElementById('script-dialog'),
                    scriptButton: document.getElementById('script-button'),
                    boardOptionsDialog: document.getElementById('board-options-dialog'),
                    boardOptionsButton: document.getElementById('board-options-button'),
                    worldOptionsDialog: document.getElementById('world-options-dialog'),
                    worldOptionsButton: document.getElementById('world-options-button')
               });

            });

            var templates = {};
            var boardSelector = document.getElementById('board-selector');
            var northSelector = document.getElementById('north-selector');
            var eastSelector = document.getElementById('east-selector');
            var southSelector = document.getElementById('south-selector');
            var westSelector = document.getElementById('west-selector');
            var darkSelector = document.getElementById('dark-selector');
            var templateEditor = document.getElementById('active-template-editor');
            var scriptSelector = document.getElementById('script-selector');
            var newScriptButton = document.getElementById('new-script-button');
            var deleteScriptButton = document.getElementById('delete-script-button');
            var scriptEditor = document.getElementById('script-editor');
            var modeSelector = document.getElementById('mode-selector');
            var editArea = document.getElementById('edit-area');
            var toolBox = document.getElementById('toolbox');
            var download = document.getElementById('download');
            var downloadJson = document.getElementById('download-json');
            var loadGame = document.getElementById('load-game');
            var newBoard = document.getElementById('new-board');
            var deleteBoard = document.getElementById('delete-board');
            var gameName = document.getElementById('game-name');
            var authorName = document.getElementById('author-name');
            var startingBoardSelector = document.getElementById('starting-board-selector');
            var titleBoardSelector = document.getElementById('title-board-selector');
            var victoryBoardSelector = document.getElementById('victory-board-selector');
            var scriptWarning = document.getElementById('script-warning');
            var scriptDialog = document.getElementById('script-dialog');
            var scriptButton = document.getElementById('script-button');
            var boardOptionsDialog = document.getElementById('board-options-dialog');
            var boardOptionsButton = document.getElementById('board-options-button');
            var worldOptionsDialog = document.getElementById('world-options-dialog');
            var worldOptionsButton = document.getElementById('world-options-button');
            var editor = undefined;
            var parser = new jzt.jztscript.JztScriptParser(true);

            dialogPolyfill.registerDialog(scriptDialog);
            dialogPolyfill.registerDialog(boardOptionsDialog);
            dialogPolyfill.registerDialog(worldOptionsDialog);

            function onToolSelected(event) {

                var toolType = event.target.value;

                if(toolType) {

                    var activeTemplate;

                    if(templates.hasOwnProperty(toolType)) {
                        activeTemplate = templates[toolType];
                    }
                    else {
                        activeTemplate = {type: toolType};
                        switch(toolType) {
                            case 'Passage':
                                activeTemplate.passageId = 1;
                                activeTemplate.targetBoard = 'Untitled';
                                break;
                            case 'Spider':
                                activeTemplate.under = new jzt.things.SpiderWeb().serialize();
                                break;
                            case 'Scriptable':
                                activeTemplate.script = 'Untitled Script';
                                break;
                            case 'River':
                                activeTemplate.direction = 'N';
                                break;
                        }
                        templates[toolType] = activeTemplate;
                    }

                    editor.setActiveTemplate(activeTemplate);

                }
                else {
                    editor.setActiveTemplate(undefined);
                }
            };

            function onBoardSelected(event) {
                editor.switchBoard(event.target.value);
            };

            function onNewBoardClicked(event) {

                var newName = window.prompt('Please enter a board name.', 'Untitled');
                var width = parseInt(window.prompt('Please enter a board width.', '40'));
                var height = parseInt(window.prompt('Please enter a board height.', '20'));
                if(newName && width && height) {
                    newName = editor.getUniqueBoardName(newName);
                    try {
                        editor.addBoard(newName, width, height);
                    }
                    catch(ex) {
                        alert(ex);
                    }
                }

            };

            function onBoardAdded(boardName) {
                boardSelector.options[boardSelector.options.length] = new Option(boardName, boardName);
                northSelector.options[northSelector.options.length] = new Option(boardName, boardName);
                southSelector.options[southSelector.options.length] = new Option(boardName, boardName);
                eastSelector.options[eastSelector.options.length] = new Option(boardName, boardName);
                westSelector.options[westSelector.options.length] = new Option(boardName, boardName);
                titleBoardSelector.options[titleBoardSelector.options.length] = new Option(boardName, boardName);
                startingBoardSelector.options[startingBoardSelector.options.length] = new Option(boardName, boardName);
                victoryBoardSelector.options[victoryBoardSelector.options.length] = new Option(boardName, boardName);
            };

            function onBoardRemoved(boardName) {

                function findIndex(element, name) {
                    var index;
                    for(index = 0; index < element.length; ++index) {
                        if(element.options[index].value === name) {
                            return index;
                        }
                    }
                }


                boardSelector.remove(findIndex(boardSelector, boardName));
                northSelector.remove(findIndex(northSelector, boardName));
                eastSelector.remove(findIndex(eastSelector, boardName));
                southSelector.remove(findIndex(southSelector, boardName));
                westSelector.remove(findIndex(westSelector, boardName));
                titleBoardSelector.remove(findIndex(titleBoardSelector, boardName));
                startingBoardSelector.remove(findIndex(startingBoardSelector, boardName));
                victoryBoardSelector.remove(findIndex(victoryBoardSelector, boardName));
            };

            function onModeChanged(mode) {
                if(parseInt(modeSelector.value) !== mode) {
                    modeSelector.value = mode.toString();
                }
            };

            function onBoardChanged(boardName) {
                boardSelector.value = boardName;
                scriptSelector.options.length = 0;
                for(var index = 0; index < editor.currentBoard.scripts.length; ++index) {
                    scriptSelector.options[index] = new Option(editor.currentBoard.scripts[index].name);
                }
                selectScript(scriptSelector.value);

            };

            function onBoardOptionsChanged(options) {

                northSelector.value = options.north ? options.north : '';
                eastSelector.value = options.east ? options.east : '';
                southSelector.value = options.south ? options.south : '';
                westSelector.value = options.west ? options.west : '';
                darkSelector.checked = options.dark;

            };

            function onGameOptionsChanged(options) {
                gameName.value = options.name || 'Untitled';
                authorName.value = options.author || 'Anonymous';
                titleBoardSelector.value = options.titleBoard || '';
                startingBoardSelector.value = options.startingBoard || editor.currentBoard.name;
                victoryBoardSelector.value = options.victoryBoard || '';
            };

            function onTemplateChanged(newTemplate) {

                var element;

                if(newTemplate) {
                    templateEditor.value = JSON.stringify(newTemplate, undefined, 4);

                    if(newTemplate.type) {
                        element = toolBox.querySelector('input[value="' + newTemplate.type + '"]');
                        if(element) {
                            element.checked = true;
                        }
                    }

                }
                else {
                    templateEditor.value = '(None)';
                    toolBox.querySelector('input[value=""]').checked = true;
                }

            };

            function onTemplateEdited() {
                if(templateEditor.value !== '') {
                    editor.setActiveTemplate(JSON.parse(templateEditor.value));
                }
            };

            function saveGame(event) {
                editor.save();
                alert('Game Saved!');
            };

            function selectScript(scriptName) {
                var script = editor.currentBoard.getScript(scriptName);
                if(script) {
                    scriptEditor.value = script.rawScript || script.script;
                }
                else {
                    scriptEditor.value = '';
                }
            }

            function onScriptSelected(event) {
                selectScript(event.target.value);
            };

            function onNewScriptClick(event) {
                var newName = window.prompt('Please enter a script name.', 'Untitled');
                var script;
                if(newName) {
                    newName = editor.getUniqueScriptName(newName);
                    script = new jzt.jztscript.JztScript(newName);
                    editor.currentBoard.scripts.push(script);
                    scriptSelector.options[scriptSelector.options.length] = new Option(newName);
                    scriptEditor.value = editor.currentBoard.getScript(newName).rawScript;
                    scriptSelector.value = newName;
                }
            };

            function onDeleteScriptClick(event) {

                var index;
                var scriptName = scriptSelector.value;

                for(index = 0; index < editor.currentBoard.scripts.length; ++index) {
                    if(editor.currentBoard.scripts[index].name === scriptName) {
                        editor.currentBoard.scripts.splice(index, 1);
                    }
                }

                scriptSelector.remove(scriptSelector.selectedIndex);

                selectScript(scriptSelector.value);

            };

            function onScriptChanged(event) {
                var script = editor.currentBoard.getScript(scriptSelector.value);
                try {
                    parser.parse(scriptEditor.value);
                    scriptWarning.innerHTML = '';
                }
                catch(exception) {
                    scriptWarning.innerHTML = exception;
                }
                script.rawScript = scriptEditor.value;

            };

            function onColorSelected(event) {
                var color = event.target.dataset['color'];
                editor.setTemplateForeground(jzt.colors.getColor(color));
            };

            function onModeSelected(event) {
                var mode = parseInt(modeSelector.value);
                editor.setMode(mode);
            };

            function onBoardOptionsSelected(event) {
                var options = {
                    north: northSelector.value,
                    south: southSelector.value,
                    east: eastSelector.value,
                    west: westSelector.value,
                    dark: darkSelector.checked
                };
                editor.setBoardOptions(options);
            };

            function onScriptButtonClick(event) {
                scriptDialog.showModal();
            }

            function onGameOptionsSelected(event) {
                var options = {
                    name: gameName.value,
                    author: authorName.value,
                    titleBoard: titleBoardSelector.value,
                    startingBoard: startingBoardSelector.value,
                    victoryBoard: victoryBoardSelector.value
                };
                editor.setGameOptions(options);
            };

            function onDownload(event) {
                var game = editor.serialize();
                download.download = game.name.replace(/[^a-z0-9_\-]/gi, '-').toLowerCase() + '.jzt';
                download.href = 'data:application/octet-stream;charset=utf-8;base64,' + LZString.compressToBase64(JSON.stringify(game));
            };

            function onDownloadJson(event) {
                var game = editor.serialize();
                downloadJson.download = game.name.replace(/[^a-z0-9_\-]/gi, '-').toLowerCase() + '.json';
                downloadJson.href = 'data:application/json;charset=utf-8;base64,' + Base64.encode(JSON.stringify(game));
            }

            function onLoadGame(event) {
                var fileReader;
                var file;
                if(event.target.files && event.target.files[0]) {

                    file = event.target.files[0];
                    fileReader = new FileReader();

                    fileReader.onload = function(event) {

                        var json;

                        if(file.type === 'application/json') {
                            json = fileReader.result;
                        } else {
                            json = fileReader.result.split(',')[1];
                            json = LZString.decompressFromBase64(json);
                        }

                        editor.deserialize(JSON.parse(json));

                    };

                    if(file.type === 'application/json') {
                        fileReader.readAsText(file);
                    }
                    else {
                        fileReader.readAsDataURL(file);
                    }

                }
            };

            function onDeleteBoard(event) {
                editor.removeBoard(editor.currentBoard.name);
            };

            var tools = document.getElementsByName('activeTemplate');
            for( var index = 0; index < tools.length; index++ ) {
                tools[index].addEventListener('change', onToolSelected, false);
            }

            var saveButton = document.getElementById('save-game');
            saveButton.addEventListener('click', saveGame, false);

            var callbacks = {
                addBoard: onBoardAdded,
                removeBoard: onBoardRemoved,
                changeBoard: onBoardChanged,
                changeTemplate: onTemplateChanged,
                changeMode: onModeChanged,
                changeBoardOptions: onBoardOptionsChanged,
                changeGameOptions: onGameOptionsChanged
            };

            editor = new jzt.Editor(editArea, callbacks);

            modeSelector.addEventListener('change', onModeSelected, false);
            boardSelector.addEventListener('change', onBoardSelected, false);
            templateEditor.addEventListener('blur', onTemplateEdited, false);
            scriptSelector.addEventListener('change', onScriptSelected, false);
            newScriptButton.addEventListener('click', onNewScriptClick, false);
            deleteScriptButton.addEventListener('click', onDeleteScriptClick, false);
            scriptEditor.addEventListener('blur', onScriptChanged, false);
            northSelector.addEventListener('change', onBoardOptionsSelected, false);
            eastSelector.addEventListener('change', onBoardOptionsSelected, false);
            southSelector.addEventListener('change', onBoardOptionsSelected, false);
            westSelector.addEventListener('change', onBoardOptionsSelected, false);
            darkSelector.addEventListener('click', onBoardOptionsSelected, false);
            download.addEventListener('click', onDownload, false);
            downloadJson.addEventListener('click', onDownloadJson, false);
            loadGame.addEventListener('change', onLoadGame, false);
            newBoard.addEventListener('click', onNewBoardClicked, false);
            deleteBoard.addEventListener('click', onDeleteBoard, false);
            gameName.addEventListener('blur', onGameOptionsSelected, false);
            authorName.addEventListener('blur', onGameOptionsSelected, false);
            titleBoardSelector.addEventListener('change', onGameOptionsSelected, false);
            startingBoardSelector.addEventListener('change', onGameOptionsSelected, false);
            victoryBoardSelector.addEventListener('change', onGameOptionsSelected, false);
            scriptButton.addEventListener('click', onScriptButtonClick, false);
            scriptDialog.querySelector('.ok-button').addEventListener('click', function () {
                scriptDialog.close();
            });
            boardOptionsButton.addEventListener('click', function () {
                boardOptionsDialog.showModal();
            });
            boardOptionsDialog.querySelector('.ok-button').addEventListener('click', function () {
                boardOptionsDialog.close();
            });
            worldOptionsButton.addEventListener('click', function () {
                worldOptionsDialog.showModal();
            });
            worldOptionsDialog.querySelector('.ok-button').addEventListener('click', function () {
                worldOptionsDialog.close();
            });*/


        </script>

    </body>
</html>
