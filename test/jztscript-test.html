<!DOCTYPE html>
<head>
	<title>JZTScript Test</title>
    <link rel="stylesheet" href="qunit.css">
</head>
<body>
	
    <div id="qunit"></div>
    <div id="qunit-fixture"></div>
    <script src="qunit.js"></script>
    <script type="text/javascript" src="../script/lexer.js"></script>
    <script type="text/javascript" src="../script/parser.js"></script>
    <script type="text/javascript" src="../script/script.js"></script>
    <script type="text/javascript" src="../script/graphics.js"></script>
    <script type="text/javascript" src="../script/basic.js"></script>
    <script type="text/javascript" src="../script/things.js"></script>
    <script type="text/javascript" src="../script/jzt-script-commands.js"></script>
    <script type="text/javascript" src="../script/jzt-script-parser.js"></script>
    <script type="text/javascript" src="../script/jzt-script.js"></script>
    
	<script type="text/javascript">
        
        var JztScriptParser = jzt.jztscript.JztScriptParser;
        var JztScript = jzt.jztscript.JztScript;
        var commands = jzt.jztscript.commands;
        var NEWLINE_ERROR = /Unexpected token \'\[New Line\]\'/;
        
        var parser = new JztScriptParser();
        
        test('Label', function(){
            var label;
            ok(parser.parse(':labelone\n:labeltwo'), ':labelone');
            throws(function(){parser.parse(':labelone two');}, /Unexpected token \'two\'/, ':labelone two');
            label = parser.parse(':mylabel')[0];
            ok(label instanceof commands.Label, 'Expecting label');
            equal(label.name, 'MYLABEL', 'Expecting mylabel');
        });
        
        test('Empty statements', function(){
            ok(parser.parse('\n\n\n'), 'three newlines');
            ok(parser.parse(''), 'empty script');
        });
        
        test('Comments', function(){
            ok(parser.parse('// This is a comment line'), 'Single comment');
            ok(parser.parse('// Comment\n:label'), 'Comment followed by statement');
            ok(parser.parse(':label // Trailing comment'), 'Trailing comment');
        });
        
        test('Become statement', function(){
            var command;
            ok(parser.parse('become fakewall'), 'become fakewall');
            ok(parser.parse('become blue snake'), 'become blue snake');
            throws(function(){parser.parse('become teal something')}, /Unexpected token \'teal\'/, 'become teal something');
            throws(function(){parser.parse('become red cactus')}, /Unexpected token \'cactus\'/, 'become red cactus');
            throws(function(){parser.parse('become blue red fakewall')}, /Unexpected token \'red\'/, 'become blue red fakewall');
            throws(function(){parser.parse('become red fakewall otter')}, /Unexpected token \'otter\'/, 'become red fakewall otter');
            throws(function(){parser.parse('become red')}, NEWLINE_ERROR, 'become red');
            
            command = parser.parse('become blue snake')[0];
            ok(command instanceof commands.BecomeCommand, 'Expecting BecomeCommand');
            equal(command.thingTemplate.color, '*1', 'Expecting Blue');
            equal(command.thingTemplate.type, 'SNAKE', 'Expecting Snake');
            
        });
        
        test('Change Statement', function(){
            var command;
            ok(parser.parse('change fakewall linewall'), 'change fakewall linewall');
            ok(parser.parse('change blue fakewall linewall'), 'change blue fakewall linewall');
            ok(parser.parse('change fakewall blue linewall'), 'change fakewall blue linewall');
            ok(parser.parse('change blue fakewall red linewall'), 'change blue fakewall red linewall');
            throws(function(){parser.parse('change fakewall blah')}, /Unexpected token \'blah\'/, 'change fakewall blah');
            throws(function(){parser.parse('change blah linewall')}, /Unexpected token \'blah\'/, 'change blah linewall');
            throws(function(){parser.parse('change blue fakewall blah')}, /Unexpected token \'blah\'/, 'change blue fakewall blah');
            throws(function(){parser.parse('change blue fakewall teal linewall')}, /Unexpected token \'teal\'/, 'change blue fakewall teal linewall');
            throws(function(){parser.parse('change blue fakewall')}, NEWLINE_ERROR, 'change blue fakewall');
            throws(function(){parser.parse('change blue red')}, /Unexpected token \'red\'/, 'change blue red');
            command = parser.parse('change blue fakewall red linewall')[0];
            ok(command instanceof commands.ChangeCommand, 'Expecting ChangeCommand');
            equal(command.fromTemplate.color, '*1', 'Expecting Blue');
            equal(command.fromTemplate.type, 'FAKEWALL', 'Expecting fakewall');
            equal(command.toTemplate.color, '*4', 'Expecting Red');
            equal(command.toTemplate.type, 'LINEWALL', 'Expecting LineWall');
            
        });
        
        test('Char statement', function() {
            var command;
            ok(parser.parse('char 50'), 'char 50');
            throws(function(){parser.parse('char')}, NEWLINE_ERROR, 'char');
            command = parser.parse('char 35')[0];
            ok(command instanceof commands.CharCommand, 'Expecting CharCommand');
            equal(command.value, 35, 'Expecting 35');
        });
        
        test('Die statement', function() {
            var command;
            ok(parser.parse('die'), 'die');
            ok(parser.parse('die magnetically'), 'die magnetically');
            throws(function(){parser.parse('die red')}, /Unexpected token \'red\'/, 'die red');
            throws(function(){parser.parse('die 5')}, /Unexpected token \'5\'/, 'die 5');
            command = parser.parse('die')[0];
            ok(command instanceof commands.DieCommand, 'Expecting DieCommand');
        });
        
        test('End statement', function() {
            var command;
            ok(parser.parse('end'), 'end');
            throws(function(){parser.parse('end 5')}, /Unexpected token \'5\'/, 'end 5');
            command = parser.parse('end')[0];
            ok(command instanceof commands.EndCommand, 'Expecting EndCommand');
        });
        
        test('Give statement', function(){
            var command;
            ok(parser.parse('give 5 gems'), 'give 5 gems');
            ok(parser.parse('give 25 torches'), 'give 25 torches');
            throws(function(){parser.parse('give red gems')}, /Unexpected token \'red\'/, 'give red gems');
            throws(function(){parser.parse('give 5 gems label')}, /Unexpected token \'label\'/, 'give 5 gems label');
            throws(function(){parser.parse('give 25')}, NEWLINE_ERROR, 'give 25');
            throws(function(){parser.parse('give gems')}, /Unexpected token \'gems\'/, 'give gems');
            throws(function(){parser.parse('give')}, NEWLINE_ERROR, 'give');
            command = parser.parse('give 25 gems')[0];
            ok(command instanceof commands.GiveCommand, 'Expecting GiveCommand');
            equal(command.amount, 25, 'Expecting 25');
            equal(command.counter, 'GEMS', 'Expecting gems');
        });
        
        test('If statement', function(){
            var command;
            ok(parser.parse('if gems <= 5 dosomething'), 'if gems <= 5 dosomething');
            ok(parser.parse('if gems = 25 somethingelse'), 'if gems = 25 somethingelse');
            ok(parser.parse('if torches < 60 blah'), 'if torches < 60 blah');
            ok(parser.parse('if ammo >= 25 blahblah'), 'if ammo >= 25 blahblah');
            ok(parser.parse('if neato > 2 neat'), 'if neato > 2 neat');
            ok(parser.parse('if not gems <= 5 dosomething'), 'if not gems <= 5 dosomething');
            ok(parser.parse('if adjacent dosomething'), 'if adjacent dosomething');
            ok(parser.parse('if blocked north dosomething'), 'if blocked north dosomething');
            ok(parser.parse('if blocked cw ccw rndp opp rndne dosomething'), 'if blocked cw ccw rndp opp rndne dosomething');
            ok(parser.parse('if aligned south dosomething'), 'if aligned south dosomething');
            ok(parser.parse('if aligned ccw cw opp rndp flow dosomething'), 'if aligned ccw cw opp rndp flow dosomething');
            ok(parser.parse('if peep 5 dosomething'), 'if peep 5 dosomething');
            ok(parser.parse('if exists fakewall dosomething'), 'if exists fakewall dosomething');
            ok(parser.parse('if exists blue lion dosomething'), 'if exists blue lion dosomething');
            ok(parser.parse('if exists 5 fakewall dosomething'), 'if exists 5 fakewall dosomething');
            ok(parser.parse('if exists 5 blue linewall dosomething'), 'if exists 5 blue linewall dosomething');
            ok(parser.parse('if not exists 10 red lion dosomething'), 'if not exists 10 red lion dosomething');
            ok(parser.parse('if not not not not gems < 5 dosomething'), 'if not not not not gems < 5 dosomething');
            throws(function(){parser.parse('if 5 gems dosomething')}, /Unexpected token \'5\'/, 'if 5 gems dosomething');
            throws(function(){parser.parse('if gems < five dosomething')}, /Unexpected token \'five\'/, 'if sems < five dosomething');
            
            command = parser.parse('if exists 5 blue lion dosomething')[0];
            ok(command instanceof commands.IfCommand, 'Expecting IfCommand');
            ok(command.expression instanceof commands.ExistsExpression, 'Expecting ExistsExpression');
            equal(command.expression.count, 5, 'Expecting 5');
            equal(command.expression.thingTemplate.color, '*1', 'Expecting blue');
            equal(command.expression.thingTemplate.type, 'LION', 'Expecting lion');
            equal(command.label, 'DOSOMETHING', 'Expecting dosomething');
            
            command = parser.parse('if gems < 5 dosomething')[0];
            ok(command.expression instanceof commands.TestingExpression, 'Expecting TestingExpression');
            equal(command.expression.operand, '<', 'Expecting <');
            
            command = parser.parse('if adjacent dosomething')[0];
            ok(command.expression instanceof commands.AdjacentExpression, 'Expecting AdjacentExpression');
            
            command = parser.parse('if blocked ccw cw n dosomething')[0];
            ok(command.expression instanceof commands.BlockedExpression, 'Expecting BlockedExpression');
            ok(command.expression.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.expression.directionExpression.terminal, commands.Direction.N, 'Expecting North');
            equal(command.expression.directionExpression.modifiers.length, 2, 'Expecting 2 modifiers');
            equal(command.expression.directionExpression.modifiers[0], commands.DirectionModifier.CCW, 'Expecting CCW');
            equal(command.expression.directionExpression.modifiers[1], commands.DirectionModifier.CW, 'Expecting CW');
            equal(command.label, 'DOSOMETHING', 'Expecting DOSOMETHING');
            
            command = parser.parse('if aligned ccw rndp opp south dosomething')[0];
            ok(command.expression instanceof commands.AlignedExpression, 'Expecting AlignedExpression');
            ok(command.expression.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.expression.directionExpression.terminal, commands.Direction.SOUTH, 'Expecting south');
            equal(command.expression.directionExpression.modifiers.length, 3, 'Expecting 3 modifiers');
            equal(command.expression.directionExpression.modifiers[0], commands.DirectionModifier.CCW, 'Expecting CCW');
            equal(command.expression.directionExpression.modifiers[1], commands.DirectionModifier.RNDP, 'Expecting RNDP');
            equal(command.expression.directionExpression.modifiers[2], commands.DirectionModifier.OPP, 'Expecting OPP');
            equal(command.label, 'DOSOMETHING', 'Expecting DOSOMETHING');
            
            command = parser.parse('if peep 1020 dosomething')[0];
            ok(command.expression instanceof commands.PeepExpression, 'Expecting PeepExpression');
            equal(command.expression.radius, 1020, 'Expecting 1020');
            equal(command.label, 'DOSOMETHING', 'Expecting DOSOMETHING');
            
            command = parser.parse('if not peep 5 ok')[0];
            ok(command.expression instanceof commands.NotExpression, 'Expecting NotExpression');
            ok(command.expression.subExpression instanceof commands.PeepExpression, 'Expecting PeepExpression'); 
            
        });
        
        test('Lock statement', function(){
            var command;
            ok(parser.parse('lock'), 'lock');
            throws(function(){parser.parse('lock blah')}, /Unexpected token \'blah\'/, 'lock blah');
            
            command = parser.parse('lock')[0];
            ok(command instanceof commands.LockCommand, 'Expecting LockCommand');
            
        });
        
        test('Move statement', function(){
            var command;
            ok(parser.parse('move north'), 'move north');
            ok(parser.parse('move north otherwise dosomething'), 'move north otherwise dosomething');
            ok(parser.parse('move s forcefully'), 'move s forcefully');
            ok(parser.parse('move e 5'), 'move e 5');
            ok(parser.parse('move e 5 forcefully'), 'move e 5 forcefully');
            ok(parser.parse('move e 10 otherwise dosomething'), 'move e 10 otherwise dosomething');
            ok(parser.parse('move cw opp rndp ccw w'), 'move cw opp rndp ccw w');
            ok(parser.parse('move ccw rndne forcefully'), 'move ccw rndne forcefully');
            ok(parser.parse('move opp flow otherwise dosomething'), 'move opp flow otherwise dosomething');
            ok(parser.parse('move opp flow 25 otherwise dosomething'), 'move 25 opp flow otherwise dosomething');
            
            command = parser.parse('move opp flow 25 otherwise dosomething')[0];
            ok(command instanceof commands.MoveCommand, 'Expecting MoveCommand');
            ok(command.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.directionExpression.count, 25, 'Expecting 25 spaces');
            equal(command.directionExpression.terminal, commands.Direction.FLOW, 'Expecting flow');
            equal(command.directionExpression.modifiers[0], commands.DirectionModifier.OPP, 'Expecting opp');
            equal(command.label, 'DOSOMETHING', 'Expecting dosomething');
            
        });
        
        test('Play statement', function(){
            var command;
            ok(parser.parse('play "cdefgabc"'), 'play "cdefgabc"');
            throws(function(){parser.parse('play north')}, /Unexpected token \'north\'/, 'play north');
            throws(function(){parser.parse('play abcdefg')}, /Unexpected token \'abcdefg\'/, 'play abcdefg');
            
            command = parser.parse('play "cdefgabc"')[0];
            ok(command instanceof commands.PlayCommand, 'Expecting PlayCommand');
            equal(command.sequence, 'cdefgabc', 'Expecting cdefgabc');
        });
        
        test('Put statement', function(){
            var command;
            ok(parser.parse('put north fakewall'), 'put north fakewall');
            ok(parser.parse('put cw rndp s fakewall'), 'put cw rndp s fakewall');
            ok(parser.parse('put cw rndp ccw e red fakewall'), 'put cw rndp ccw e red fakewall');
            throws(function(){parser.parse('put cw rndp ccw red fakewall')}, /Unexpected token \'red\'/, 'put cw rndp ccw red fakewall');
            throws(function(){parser.parse('put fakewall')}, /Unexpected token \'fakewall\'/, 'put fakewall');
            throws(function(){parser.parse('put e')}, NEWLINE_ERROR, 'put e');
            
            command = parser.parse('put north fakewall')[0];
            ok(command instanceof commands.PutCommand, 'Expecting PutCommand');
            ok(command.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.directionExpression.terminal, commands.Direction.NORTH, 'Expecting NORTH');
            equal(command.thingTemplate.type, 'FAKEWALL', 'Expecting FAKEWALL');
        });
        
        test('Scroll statement', function(){
            var command;
            ok(parser.parse('scroll "Hello, World!"'), 'scroll "Hello, World!"');
            ok(parser.parse('scroll bold "Hello, World!"'), 'scroll bold "Hello, World!"');
            ok(parser.parse('scroll "Hello, World!" something'), 'scroll "Hello, World!" something');
            ok(parser.parse('scroll bold "Hello, World!" something'), 'scroll bold "Hello, World!" something');
            throws(function(){parser.parse('scroll Hello, World!')}, /Unrecognized token/, 'scroll Hello, World!');
            throws(function(){parser.parse('scroll Hello World')}, /Unexpected token \'Hello\'/, 'scroll Hello World');
            
            command = parser.parse('scroll bold "Hello, World!" something')[0];
            ok(command instanceof commands.ScrollCommand, 'Expecting ScrollCommand');
            ok(command.bold, 'Expecting bold');
            equal(command.text, 'Hello, World!', 'Expecting hello world');
            equal(command.label, 'SOMETHING', 'Expecting SOMETHING');
        });
        
        test('Send Statement', function(){
            var command;
            ok(parser.parse('send bob dosomething'), 'send bob dosomething');
            ok(parser.parse('send self dosomething'), 'send self dosomething');
            throws(function(){parser.parse('send dosomething')}, NEWLINE_ERROR, 'send dosomething');
            
            command = parser.parse('send bob something')[0];
            ok(command instanceof commands.SendCommand, 'Expecting SendCommand');
            equal(command.recipient, 'BOB', 'Expecting BOB');
            equal(command.message, 'SOMETHING', 'Expecting SOMETHING');
        });
        
        test('Set Statement', function(){
            var command;
            ok(parser.parse('set flag'), 'set flag');
            ok(parser.parse('set 5 something'), 'set 5 something');
            throws(function(){parser.parse('set')}, NEWLINE_ERROR, 'set');
            throws(function(){parser.parse('set five something')}, /Unexpected token \'something\'/, 'set five something');
            
            command = parser.parse('set 600 gems')[0];
            ok(command instanceof commands.SetCommand, 'Expecting SetCommand');
            equal(command.value, 600, 'Expecting 600');
            equal(command.counter, 'GEMS', 'Expecting GEMS');
        });
        
        test('Take Statement', function(){
            var command;
            ok(parser.parse('take 5 gems toopoor'), 'take 5 gems toopoor');
            ok(parser.parse('take 10 something'), 'take 10 something');
            throws(function(){parser.parse('take something')}, /Unexpected token \'something\'/, 'take something');
            throws(function(){parser.parse('take 1 gems 3')}, /Unexpected token \'3\'/, 'take 1 gems 3');
            throws(function(){parser.parse('take 5 gems toopoor gems')}, /Unexpected token \'gems\'/, 'take 5 gems toopoor gems');
            
            command = parser.parse('take 100 torches')[0];
            ok(command instanceof commands.TakeCommand, 'Expecting TakeCommand');
            equal(command.value, 100, 'Expecting 100');
            equal(command.counter, 'TORCHES', 'Expecting torches');
            ok(command.label === undefined, 'Not expecting label');
            
            command = parser.parse('take 10 gems toopoor')[0];
            equal(command.value, 10, 'Expecting 10');
            equal(command.counter, 'GEMS', 'Expecting GEMS');
            equal(command.label, 'TOOPOOR', 'Expecting TOOPOOR');
        });
        
        test('ThrowStar Statement', function(){
            var command;
            ok(parser.parse('throwstar north'), 'throwstar north');
            ok(parser.parse('throwstar cw ccw opp seek'), 'throwstar cw ccw opp seek');
            throws(function(){parser.parse('throwstar')}, NEWLINE_ERROR, 'throwstar');
            
            command = parser.parse('throwstar cw n')[0];
            ok(command instanceof commands.ThrowStarCommand, 'Expecting ThrowStarCommand');
            ok(command.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.directionExpression.terminal, commands.Direction.N, 'Expecting N');
            equal(command.directionExpression.modifiers[0], commands.DirectionModifier.CW, 'Expecting CW');
        });
        
        test('Torch Statement', function(){
            var command;
            ok(parser.parse('torch 5'), 'torch 5');
            ok(parser.parse('torch'), 'torch');
            throws(function(){parser.parse('torch five')}, /Unexpected token \'five\'/, 'torch five');
            
            command = parser.parse('torch 00546')[0];
            ok(command instanceof commands.TorchCommand, 'Expecting TorchCommand');
            equal(command.radius, 546, 'Expecting 546');
        });
            
        test('Restore statement', function(){
            var command;
            ok(parser.parse('restore labelname'), 'restore labelname');
            throws(function(){parser.parse('restore')}, NEWLINE_ERROR, 'restore');
            
            command = parser.parse('restore somelabel')[0];
            ok(command instanceof commands.RestoreCommand, 'Expecting RestoreCommand');
            equal(command.label, 'SOMELABEL', 'Expecting somelabel');
        });
            
        test('Say statement', function(){
            var command;
            ok(parser.parse('say "Something interesting, joe!"'), 'say "Something intersting, joe!"');
            throws(function(){parser.parse('say something')}, /Unexpected token \'something\'/, 'say something');
            throws(function(){parser.parse('say')}, NEWLINE_ERROR, 'say');
            throws(function(){parser.parse('say "unterminated string')}, /Unterminated string literal/, 'say "unterminated string');
        
            command = parser.parse('say "Hello, World!"')[0];
            ok(command instanceof commands.SayCommand, 'Expecting SayCommand');
            equal(command.text, 'Hello, World!', 'Expecting same string');
        });
        
        test('Shoot statement', function(){
            var command;
            ok(parser.parse('shoot north'), 'shoot north');
            ok(parser.parse('shoot cw ccw opp flow'), 'shoot cw ccw opp flow');
            throws(function(){parser.parse('shoot red')}, /Unexpected token \'red\'/, 'shoot red');
            throws(function(){parser.parse('shoot')}, NEWLINE_ERROR, 'shoot');
            
            command = parser.parse('shoot cw seek')[0];
            ok(command instanceof commands.ShootCommand, 'Expecting ShootCommand');
            ok(command.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.directionExpression.terminal, commands.Direction.SEEK, 'Expecting SEEK');
            equal(command.directionExpression.modifiers[0], commands.DirectionModifier.CW, 'Expecting CW');
        });
        
        test('Stand statement', function(){
            var command;
            ok(parser.parse('stand'), 'stand');
            throws(function(){parser.parse('stand north')}, /Unexpected token \'north\'/, 'stand north');
            
            command = parser.parse('stand')[0];
            ok(command instanceof commands.StandCommand, 'Expecting StandCommand');
        });
        
        test('Unlock statement', function(){
            var command;
            ok(parser.parse('unlock'), 'unlock');
            throws(function(){parser.parse('unlock something')}, /Unexpected token \'something\'/, 'unlock something');
            
            command = parser.parse('unlock')[0];
            ok(command instanceof commands.UnlockCommand, 'Expecting UnlockCommand');
        });
        
        test('Wait statement', function(){
            var command;
            ok(parser.parse('wait 5'), 'wait 5');
            ok(parser.parse('wait'), 'wait');
            throws(function(){parser.parse('wait for something')}, /Unexpected token \'for\'/, 'wait for something');
            
            command = parser.parse('wait 4345')[0];
            ok(command instanceof commands.WaitCommand, 'Expecting WaitCommand');
            equal(command.count, 4345, 'Expecting 4345');
        });
        
        test('Walk statement', function(){
            var command;
            ok(parser.parse('walk north'), 'walk north');
            ok(parser.parse('walk cw ccw opp seek'), 'walk cw ccw opp seek');
            throws(function(){parser.parse('walk')}, NEWLINE_ERROR, 'walk');
            throws(function(){parser.parse('walk red')}, /Unexpected token \'red\'/, 'walk red');
            
            command = parser.parse('walk cw seek')[0];
            ok(command instanceof commands.WalkCommand, 'Expecting WalkCommand');
            ok(command.directionExpression instanceof commands.DirectionExpression, 'Expecting DirectionExpression');
            equal(command.directionExpression.terminal, commands.Direction.SEEK, 'Expecting SEEK');
            equal(command.directionExpression.modifiers[0], commands.DirectionModifier.CW, 'Expecting CW');
        });

        test('Zap statement', function(){
            var command;
            ok(parser.parse('zap target'), 'zap target');
            throws(function(){parser.parse('zap')}, NEWLINE_ERROR, 'zap');
            
            command = parser.parse('zap alabel')[0];
            ok(command instanceof commands.ZapCommand, 'Expecting ZapCommand');
            equal(command.label, 'ALABEL', 'Expecting alabel');
        });
        
        test('Multi-line script', function(){
            var result = parser.parse(':label\nwait 5\nwalk cw ccw seek\n:label2\nmove rndp ccw n\nif aligned south label2\nend\n:label2\nsay "Interesting!"\nend');
            ok(result.length, 10, 'Expecting 10 commands');
            ok(result[0] instanceof commands.Label, 'Expecting Label');
            ok(result[1] instanceof commands.WaitCommand, 'Expecting WaitCommand');
            ok(result[2] instanceof commands.WalkCommand, 'Expecting WalkCommand');
            ok(result[3] instanceof commands.Label, 'Expecting Label');
            ok(result[4] instanceof commands.MoveCommand, 'Expecting MoveCommand');
            ok(result[5] instanceof commands.IfCommand, 'Expecting IfCommand');
            ok(result[6] instanceof commands.EndCommand, 'Expecting EndCommand');
            ok(result[7] instanceof commands.Label, 'Expecting Label');
            ok(result[8] instanceof commands.SayCommand, 'Expecting SayCommand');
            ok(result[9] instanceof commands.EndCommand, 'Expecting EndCommand');
        });
        
	</script>
	
</body>